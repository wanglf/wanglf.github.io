---
title: Bind实现DNS高可用性
tags: bind
layout: post
categories: network
---
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline3">主从设置</a>
<ul>
<li><a href="#orgheadline1">Primary服务器设置</a></li>
<li><a href="#orgheadline2">Slave服务器设置</a></li>
</ul>
</li>
<li><a href="#orgheadline4">关于更新时间</a></li>
<li><a href="#orgheadline5">常见错误</a></li>
<li><a href="#orgheadline6">参考资料</a></li>
</ul>
</div>
</div>
<!--abstract-begin-->
<p>
Bind是最常使用的DNS服务器软件，互联网中约90%的名称解析服务由Bind完成。本文主要讲述如何通过配置Master-Slave服务，实现高可用性。
</p>
<!--abstract-end-->

<div id="outline-container-orgheadline3" class="outline-2">
<h2 id="orgheadline3">主从设置</h2>
<div class="outline-text-2" id="text-orgheadline3">
</div><div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1">Primary服务器设置</h3>
<div class="outline-text-3" id="text-orgheadline1">
<pre class="example">
zone "movie.edu" IN {
        type master;
        file "named.movie.edu";
};

zone "249.249.192.in-addr.arpa" IN {
        type master;
        file "named.192.249.249";
};
</pre>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2">Slave服务器设置</h3>
<div class="outline-text-3" id="text-orgheadline2">
<pre class="example">
zone "movie.edu" IN {
        type slave;
        file "bak.movie.edu";
        masters {172.16.10.51; };
};

zone "249.249.192.in-addr.arpa" IN {
        type slave;
        file "bak.192.249.249";
        masters {172.16.10.51; };
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-2">
<h2 id="orgheadline4">关于更新时间</h2>
<div class="outline-text-2" id="text-orgheadline4">
<p>
更新时间与SOA中的几个参数有关:
</p>

<pre class="example">
movie.edu. IN SOA toystory.movie.edu. al.movie.edu. (
        201405211021 ; Serial
        3H ; Refresh after 3 hours
        1H ; Retry after 1 hour
        1W ; Expire after 1 week
        1H )
</pre>

<p>
Slave服务器根据序号高低来判断，自身是否需要从主服务器更新数据。
</p>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-2">
<h2 id="orgheadline5">常见错误</h2>
<div class="outline-text-2" id="text-orgheadline5">
<pre class="example">
May 21 22:03:24 realsrv02 named[26175]: dumping master file: tmp-KxnfE34nIM: open: permission denied
</pre>

<p>
解决方法:
</p>

<pre class="example">
chmod g+w /var/named
</pre>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-2">
<h2 id="orgheadline6">参考资料</h2>
<div class="outline-text-2" id="text-orgheadline6">
<p>
<a href="http://shop.oreilly.com/product/9780596100575.do">DNS and BIND, 5th Edition By Cricket Liu, Paul Albitz.</a>
</p>
</div>
</div>
